<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>ORACLE之触发器和游标 | Yhchdev</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">ORACLE之触发器和游标</h1><a id="logo" href="/.">Yhchdev</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">ORACLE之触发器和游标</h1><div class="post-meta">May 1, 2018</div><div class="post-content"><h4 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h4><h5 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h5><p>  触发器（trigger）是SQL server 提供给程序员和数据分析员来保证数据完整性的一种方法，它是与表事件相关的特殊的存储过程，它的执行不是由程序调用，也不是手工启动，而是由事件来触发，比如当对一个表进行操作（ insert，delete， update）时就会激活它执行。触发器经常用于加强数据的完整性约束和业务规则等</p>
<h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><p>1.触发器语句</p>
<p>–指定触发器定时，事件,表名及类型</p>
<p>2.触发器主体</p>
<p>–PL/SQL语句或过程调用</p>
<p>3.触发器限制</p>
<p>–通过WHEN子句实现</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> &lt;触发器名称&gt;</span><br><span class="line"><span class="keyword">before</span>/<span class="keyword">after</span></span><br><span class="line"><span class="keyword">insert</span>/<span class="keyword">delete</span>/<span class="keyword">update</span>&lt;列名&gt; <span class="keyword">on</span> &lt;表名(与数据库关联的数据表)&gt;</span><br><span class="line">[<span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span>]</span><br><span class="line"><span class="keyword">when</span>(&lt;条件&gt;)</span><br><span class="line">    &lt;PL/<span class="keyword">SQL</span> 程序块&gt;</span><br></pre></td></tr></table></figure>
<h5 id="数据库触发器"><a href="#数据库触发器" class="headerlink" title="数据库触发器"></a>数据库触发器</h5><p><em>表级触发器<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> Tristudinfo</span><br><span class="line"><span class="keyword">after</span> <span class="keyword">insert</span> <span class="keyword">or</span> <span class="keyword">update</span> <span class="keyword">or</span> <span class="keyword">delete</span></span><br><span class="line"><span class="keyword">on</span> studinfo</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    dbms_output.put_line(<span class="string">"在Studinfo表上执行了DML语句操作"</span>);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>    
</em>行级触发器<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> Tristudinfo</span><br><span class="line"><span class="keyword">after</span> <span class="keyword">insert</span> <span class="keyword">or</span> <span class="keyword">update</span> <span class="keyword">or</span> <span class="keyword">delete</span></span><br><span class="line"><span class="keyword">on</span> studinfo</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    dbms_output.put_line(<span class="string">"在Studinfo表上执行了DML语句操作"</span>);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>    </p>
<ul>
<li>行级触发器引用值</li>
</ul>
<p>作用：实现多表之间的级联，例如学生选课系统，当学生选择了某门课程那么相应的任课老师，他的课程下面的学生记录也要添加该学生的学生记录，并且控制选课人数 </p>
<p>1.:new 引用插入操作的某列值,如 :new.classid</p>
<p>2.:old 引用删除操作的某列值,如 :old.classid</p>
<p>注意:</p>
<p>只能在For each row即行级触发器中使用:new;:old<br>执行更新操作时，可以使用:new获取新值(更新后的值);<br>使用:old获取旧值(更新前的值)</p>
<p>实例<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> trigclassinfo</span><br><span class="line"><span class="keyword">after</span> <span class="keyword">update</span></span><br><span class="line"><span class="keyword">on</span> classinfo</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    dbms_output.put_line(:old.classid||:old.classname);</span><br><span class="line">    dbms_output.put_line(:new.classid||:new.classname);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>    </p>
<p><img src="/2018/05/01/ORACLE之触发器和游标/picone.PNG" alt="picone"></p>
<p>创建学生选课触发器</p>
<p>学生选课结果表和学生任课信息表结构如下<br><img src="/2018/05/01/ORACLE之触发器和游标/pictwo.PNG" alt="pictwo"></p>
<p>选课(insert)<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> TrigElect_insert</span><br><span class="line">  <span class="keyword">after</span> <span class="keyword">insert</span></span><br><span class="line"><span class="keyword">on</span> ELectCourseResult</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">update</span> TecherCourse T <span class="keyword">set</span></span><br><span class="line">  RemainPersonCount = RemainPersonCount+<span class="number">1</span></span><br><span class="line">  <span class="keyword">where</span> T.Teacherno = :new.Teacherno</span><br><span class="line">  <span class="keyword">and</span> T.courseID = :new.courseID；</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure><br>退选(delect)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> TrigElect_Delete</span><br><span class="line">  <span class="keyword">after</span> delect</span><br><span class="line"><span class="keyword">on</span> electcoursesult</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">update</span> Techercourse T <span class="keyword">set</span></span><br><span class="line">  Remainpersoncount = RemainpersonCount<span class="number">-1</span>;</span><br><span class="line">  where T.Teacherno = :old.Teacherno and</span><br><span class="line">  courseID=:old.courseID;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>    
<p>使用触发器实现自动编号<br>作用:实现表的ID自增</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//创建表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> TestSeq</span><br><span class="line">(</span><br><span class="line">AutoID <span class="built_in">int</span>,</span><br><span class="line"><span class="keyword">Name</span> varchar2(<span class="number">20</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//创建序列</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">sequence</span> SeqID</span><br><span class="line"><span class="keyword">start</span> <span class="keyword">with</span> <span class="number">1001</span>//初始值</span><br><span class="line"><span class="keyword">increment</span> <span class="keyword">by</span> <span class="number">1</span> //步长</span><br><span class="line"></span><br><span class="line">//触发器实现自动编号</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> trig_Testseq</span><br><span class="line"><span class="keyword">before</span> <span class="keyword">insert</span> <span class="keyword">on</span> TestSeq</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">declare</span> AID <span class="built_in">int</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> seqid.nextval <span class="keyword">into</span> AID <span class="keyword">from</span> dual;</span><br><span class="line">  :new.AutoID:=AID;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>    
<p>实现效果</p>
<p><img src="/2018/05/01/ORACLE之触发器和游标/picthree.PNG" alt="picthree"></p>
<ul>
<li>使用条件谓词的触发器</li>
</ul>
<p>inserting:执行insert操作</p>
<p>updating :执行update操作</p>
<p>deleting:执行delete操作</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create <span class="keyword">or</span> repalce trigger TriClassinfo</span><br><span class="line">after insert <span class="keyword">or</span> update <span class="keyword">or</span> delete</span><br><span class="line">on Classinfo</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> inserting <span class="keyword">then</span></span><br><span class="line">      dbms_output.put_line(<span class="string">'执行了insert操作'</span>);</span><br><span class="line">    <span class="keyword">elsif</span> updating <span class="keyword">then</span></span><br><span class="line">      dbms_output.put_line(<span class="string">'执行了updata操作'</span>);</span><br><span class="line">    <span class="keyword">elsif</span> deleting <span class="keyword">then</span></span><br><span class="line">      dbms_output.put_line(<span class="string">'执行了delete操作'</span>);</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>    
<p><img src="/2018/05/01/ORACLE之触发器和游标/picfour.PNG" alt="picfour"></p>
<h4 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h4><h5 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h5><p>游标（Cursor）是处理数据的一种方法，为了查看或者处理结果集中的数据，游标提供了在结果集中一次一行或者多行前进或向后浏览数据的能力。可以把游标当作一个指针，它可以指定结果中的任何位置，然后允许用户对指定位置的数据进行处理。</p>
<h5 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Cursor <span class="tag">&lt;<span class="name">游标名</span>&gt;</span> is</span><br><span class="line"><span class="tag">&lt;<span class="name">SQL语句</span>&gt;</span></span><br></pre></td></tr></table></figure>    
<h5 id="游标类型"><a href="#游标类型" class="headerlink" title="游标类型"></a>游标类型</h5><ul>
<li>隐式游标</li>
</ul>
<p>由Oracle内部声明，用于处理每个SQL语句</p>
<p>用于处理DML语句，返回单行的查询</p>
<ul>
<li>显式游标</li>
</ul>
<p>控制游标</p>
<p><strong>OPEN</strong>:打开游标，在查询返回任何行之前必须打开游标</p>
<pre><code>OPEN &lt;游标名&gt;;
</code></pre><p><strong>FETCH</strong>：一次只能在一个数据集中检索行，可以重复执行，直到检索完了所有行</p>
<pre><code>FETCH &lt;游标名&gt; into var1,var2...varn;
</code></pre><p><strong>CLOSE</strong>：关闭游标</p>
<pre><code>CLOSE&lt;游标名&gt;;
</code></pre><p>游标的属性</p>
<p>用于访问游标的环境区域，判断是否还有数据</p>
<p>–%NOTFOUD 变量最后从游标中获取记录的时候，在结果集中没有找到了记录</p>
<p>–%FOUND 变量最后从游标中获取记录的时候，在结果集中找到了记录</p>
<p>–%ROWCOUNT 变量最后从游标中获取记录的时候，在结果集中找到了记录数</p>
<p>–%ISOPEN </p>
<p>将属性添加到游标名后面即可使用游标</p>
<p>显示游标示列<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">declare</span><br><span class="line">    Cid classinfo.classid%<span class="keyword">Type</span>;</span><br><span class="line">    Cname classinfo.classname%<span class="keyword">Type</span>;</span><br><span class="line">cursor mycur <span class="keyword">is</span> <span class="keyword">select</span> classid,classname <span class="keyword">from</span> classinfo;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    open mycur;</span><br><span class="line">    fetch mycur <span class="keyword">into</span> Cid,Cname;</span><br><span class="line">    <span class="keyword">while</span> mycur%found</span><br><span class="line">    <span class="keyword">loop</span></span><br><span class="line">      dbms_output.put_line(Cid||<span class="string">'  '</span>||Cname);</span><br><span class="line">      fetch mycur <span class="keyword">into</span> Cid,Cname;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">    dbms_output.put_line(<span class="string">'记录数:'</span>||mycur%rowcount);</span><br><span class="line">    close mycur;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure><br><img src="/2018/05/01/ORACLE之触发器和游标/picfive.PNG" alt="picfive"><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">    TID TeacherInfo.TeacherNo%<span class="keyword">Type</span>;</span><br><span class="line">    TName TeacherInfo.TeacherName%type;</span><br><span class="line">CURSOR mycur is</span><br><span class="line">    <span class="keyword">select</span> TeacherNo,TeacherName <span class="keyword">From</span> TeacherInfo</span><br><span class="line">    <span class="keyword">Where</span> TeacherBirthDay&gt;=<span class="keyword">To_Date</span>(<span class="string">'1981-2-5'</span>,<span class="string">'YYYY-MM-DD'</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">open</span> mycur;</span><br><span class="line">    fetch mycur into TID,TName;</span><br><span class="line">    while mycur%found</span><br><span class="line">    loop</span><br><span class="line">        dbms_output.put_line(TID||TNAME);</span><br><span class="line">        fetch mycur into TID,TName;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">    close mycur;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>    </p>
<p>这样的游标过于繁琐，先要定义数据类型，还要打开游标，判断数据集中是否还有数据数据，最后还要关闭游标,是否有一种更简单的方法呢，答案是：有的，它就是循环游标，显示游标的替代方法</p>
<ul>
<li>FOR循环游标</li>
</ul>
<p>工作原理</p>
<p>1.将它的循环索引声明为%ROWTYPE的记录</p>
<p>2.隐式的打开游标</p>
<p>3.处理完所有行，推出循环，并且隐式的关闭游标</p>
<p>FOR循环游标示列<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> </span><br><span class="line">    <span class="keyword">cursor</span> mycur <span class="keyword">is</span> <span class="keyword">select</span> classid,classname <span class="keyword">from</span> classinfo;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">for</span> mrec <span class="keyword">in</span> mycur</span><br><span class="line"><span class="keyword">loop</span></span><br><span class="line">    dbms_output.put_line(mrec.classid||<span class="string">'   '</span>||mrec.classname||<span class="string">'    '</span>||mycur%Rowcount);//输出当前的索引</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>    </p>
<p>优点：实现同样的功能，可以发现他的代码量明显减少了,简化大码</p>
<ul>
<li>REF游标</li>
</ul>
<h4 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h4><p>1.编写简单触发器，实现当在学生信息表（StudInfo）中添加记录后，在SQL<em>PLUS 中显<br>示添加的各项值，当在学生信息表（StudInfo）中删除记录后，在SQL</em>PLUS 中显示删<br>除的各项值，当在学生信息表（StudInfo）中更新记录后，在SQL*PLUS 中显示更新前<br>和更新后的各项值。<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create <span class="keyword">or</span> replace trigger Tristudinfo</span><br><span class="line">after insert <span class="keyword">or</span> update <span class="keyword">or</span> delete</span><br><span class="line">on studinfo</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">if</span> inserting <span class="keyword">then</span></span><br><span class="line">  dbms_output.put_line(<span class="symbol">:new</span>.studno<span class="params">||</span><span class="symbol">:new</span>.studname<span class="params">||</span><span class="symbol">:new</span>.studsex<span class="params">||</span><span class="symbol">:new</span>.studbirthday<span class="params">||</span><span class="symbol">:new</span>.classid);  <span class="keyword">elsif</span>   updating <span class="keyword">then</span></span><br><span class="line">  dbms_output.put_line(<span class="symbol">:new</span>.studno<span class="params">||</span><span class="symbol">:new</span>.studname<span class="params">||</span><span class="symbol">:new</span>.studsex<span class="params">||</span><span class="symbol">:ne</span> w.studbirthday<span class="params">||</span><span class="symbol">:new</span>.classid);</span><br><span class="line">  dbms_output.put_line(<span class="symbol">:old</span>.studno<span class="params">||</span><span class="symbol">:old</span>.studname<span class="params">||</span><span class="symbol">:old</span>.studsex<span class="params">||</span><span class="symbol">:old</span>.studbirthday<span class="params">||</span><span class="symbol">:old</span>.classid);</span><br><span class="line"><span class="keyword">elsif</span> deleting the</span><br><span class="line">  dbms_output.put_line(<span class="symbol">:old</span>.studno<span class="params">||</span><span class="symbol">:old</span>.studname<span class="params">||</span><span class="symbol">:old</span>.studsex<span class="params">||</span><span class="symbol">:old</span>.studbirthday<span class="params">||</span><span class="symbol">:old</span>.classid);</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">if</span>;  </span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></p>
<p>2． 定义一个简单游标，在 SQL*PLUS 环境中使用 WHILE 循环实现学生信息表（StudInfo）<br>1986 年以后出生的男学生信息。</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">declare</span><br><span class="line">sstudno studInfo.studno%<span class="keyword">Type</span>;</span><br><span class="line">sstudname studInfo.studname%<span class="keyword">Type</span>;</span><br><span class="line">sstudsex studInfo.studsex%<span class="keyword">Type</span>;</span><br><span class="line">sstudbirthday studInfo.studbirthday%<span class="keyword">Type</span>;</span><br><span class="line">sclassid studInfo.classid%<span class="keyword">Type</span>;</span><br><span class="line">CURSOR mycur <span class="keyword">is</span></span><br><span class="line"><span class="keyword">select</span> studno,studName,studsex,studbirthday,classid <span class="keyword">From</span> studInfo</span><br><span class="line"><span class="keyword">Where</span> studBirthDay&gt;=To_Date(<span class="string">'1986-01-01'</span>,<span class="string">'YYYY-MM-DD'</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">open mycur;</span><br><span class="line">fetch mycur <span class="keyword">into</span> sstudno,sstudName,sstudsex,sstudbirthday,sclassid;</span><br><span class="line"><span class="keyword">while</span> mycur%found</span><br><span class="line"><span class="keyword">loop</span></span><br><span class="line">  dbms_output.put_line(sstudno||sstudName||sstudsex||sstudbirthday||sclassid);</span><br><span class="line">  fetch mycur <span class="keyword">into</span> sstudno,sstudName,sstudsex,sstudbirthday,sclassid;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">close mycur;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>  
<p>3． 定义一个游标，使用 FOR 循环将班级编号为 20010505 的学生平均分按从高到低排名，<br>要求在 SQL*PLUS 环境中显示学号，姓名，性别，班级名称，平均分，名次字段。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line"><span class="keyword">CURSOR</span> mycur <span class="keyword">is</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">rank</span>() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">avg</span>(studscore) <span class="keyword">desc</span>) mc,studno,studname,studsex,<span class="keyword">avg</span>(studscore) avgscore,classname</span><br><span class="line"><span class="keyword">from</span> studinfo  <span class="keyword">join</span> studscoreinfo <span class="keyword">using</span>(studno)</span><br><span class="line"><span class="keyword">join</span> classinfo c <span class="keyword">using</span>(classid)</span><br><span class="line"><span class="keyword">where</span> classid = <span class="string">'20010505'</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> studno,studname,studsex,classname</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">avg</span>(studscore) <span class="keyword">desc</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">for</span> mrec <span class="keyword">in</span> mycur</span><br><span class="line"><span class="keyword">loop</span></span><br><span class="line">  dbms_output.put_line(mrec.mc||mrec.studno||mrec.studName||mrec.studsex||mrec.avgscore||mrec.classname);</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">rank</span>() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">avg</span>(studscore) <span class="keyword">desc</span>) paiming,studno,studname,studsex,<span class="keyword">avg</span>(studscore) avgscore,classname</span><br><span class="line"><span class="keyword">from</span> studinfo  <span class="keyword">join</span> studscoreinfo <span class="keyword">using</span>(studno)</span><br><span class="line"><span class="keyword">join</span> classinfo c <span class="keyword">using</span>(classid)</span><br><span class="line"><span class="keyword">where</span> classid = <span class="string">'20010505'</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> studno,studname,studsex,classname</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">avg</span>(studscore) <span class="keyword">desc</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>4． 使用 CREATE TABLE tablename as subquery 子查询创建一个空表（StudInfo_Back），包<br>括（学号，姓名，性别，出生日期，班级名称）字段，其各字段数据类型与学生信息表<br>和班级信息表中对应字段相同。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tablename StudInfo_Back</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> sutudinfo</span><br><span class="line"><span class="keyword">where</span> <span class="number">1</span>=<span class="number">2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>5． 使用游标循环，将1986 年以后出生的学生一条条添加到题目4 中创建的表 StudInfo_Back<br>中。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">sstudno studInfo.studno%<span class="keyword">Type</span>;</span><br><span class="line">sstudname studInfo.studname%Type;</span><br><span class="line">sstudsex studInfo.studsex%Type;</span><br><span class="line">sstudbirthday studInfo.studbirthday%Type;</span><br><span class="line">sclassid studInfo.classid%Type;</span><br><span class="line">CURSOR mycur is</span><br><span class="line"><span class="keyword">select</span> studno,studName,studsex,studbirthday,classid <span class="keyword">From</span> studInfo</span><br><span class="line"><span class="keyword">Where</span> studBirthDay&gt;=<span class="keyword">To_Date</span>(<span class="string">'1986-01-01'</span>,<span class="string">'YYYY-MM-DD'</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">open</span> mycur;</span><br><span class="line">fetch mycur into sstudno,sstudName,sstudsex,sstudbirthday,sclassid;</span><br><span class="line">while mycur%found</span><br><span class="line">loop</span><br><span class="line">  <span class="keyword">insert</span> <span class="keyword">into</span> studinfo_back <span class="keyword">values</span> (sstudno,sstudName,sstudsex,sstudbirthday,sclassid);</span><br><span class="line">  fetch mycur into sstudno,sstudName,sstudsex,sstudbirthday,sclassid;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">close mycur;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></p>
<p>6． 查询 StudInfo_Back 表记录，查询结果将性别为男的显示为 MALE，为女的显示为FEMALE。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> studno,studname,</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">when</span> studsex=<span class="string">'男'</span> <span class="keyword">then</span> <span class="string">'MALE'</span></span><br><span class="line"><span class="keyword">else</span> <span class="string">'FEMLE'</span> <span class="keyword">end</span> studsex，</span><br><span class="line">studbirthday,classid</span><br><span class="line"><span class="keyword">from</span> studinfo_back</span><br></pre></td></tr></table></figure></p>
<p>7． 将学生信息表（StudInfo）中的其它记录（即不在 Studinfo_back 表中的记录）添加到StudInfo_Back 表中（使用 IN 子查询和 Merge 两种方法实现）<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">B.Merge方式</span><br><span class="line">merge into studinfo_back sb</span><br><span class="line">using studinfo s</span><br><span class="line"><span class="function"><span class="title">on</span><span class="params">(sb.studno=s.studno)</span></span></span><br><span class="line">when not matched then</span><br><span class="line"><span class="function"><span class="title">insert</span><span class="params">(sb.studno,sb.studname,sb.studsex,sb.studbirthday,sb.classid)</span></span></span><br><span class="line">values (s<span class="selector-class">.studno</span>,s<span class="selector-class">.studname</span>,s<span class="selector-class">.studsex</span>,s<span class="selector-class">.studbirthday</span>,s.classid)</span><br></pre></td></tr></table></figure></p>
<p>8． 创建一个存储过程，使用游标循环找出班级编号为 20010505 班的平均分最高的学生和<br>最低的学生。（注：不能使用 MAX，MIN）<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="function"><span class="keyword">PROCEDURE</span> <span class="title">FINDMAXANDMIN</span></span></span><br><span class="line"><span class="function"><span class="title">IS</span></span></span><br><span class="line"><span class="function"><span class="title">CURSOR</span> <span class="title">MYCUR</span></span></span><br><span class="line"><span class="function"><span class="title">IS</span></span></span><br><span class="line"><span class="function"><span class="title">SELECT</span> <span class="title">S</span>.<span class="title">STUDNO</span>,<span class="title">STUDNAME</span>,<span class="title">ROUND</span><span class="params">(AVG(SS.STUDSCORE)</span>,2) <span class="title">AVGSCORE</span></span></span><br><span class="line"><span class="function"><span class="title">FROM</span> <span class="title">STUDINFO</span> <span class="title">S</span> <span class="title">INNER</span> <span class="title">JOIN</span> <span class="title">STUDSCOREINFO</span> <span class="title">SS</span></span></span><br><span class="line"><span class="function"><span class="title">ON</span> <span class="title">S</span>.<span class="title">STUDNO</span>=<span class="title">SS</span>.<span class="title">STUDNO</span></span></span><br><span class="line"><span class="function"><span class="title">WHERE</span> <span class="title">S</span>.<span class="title">CLASSID</span>='20010505'</span></span><br><span class="line"><span class="function"><span class="title">GROUP</span> <span class="title">BY</span> <span class="title">S</span>.<span class="title">STUDNO</span>,<span class="title">S</span>.<span class="title">STUDNAME</span>;</span></span><br><span class="line">MAXSTUDNO STUDINFO.STUDNO%<span class="keyword">TYPE</span>;</span><br><span class="line">MINSTUDNO STUDINFO.STUDNO%<span class="keyword">TYPE</span>;</span><br><span class="line">MAXSCORE NUMBER:=<span class="number">0</span>;</span><br><span class="line">MINSCORE NUMBER:=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">FOR</span> MYROWS <span class="keyword">IN</span> MYCUR</span><br><span class="line"><span class="keyword">LOOP</span></span><br><span class="line">  <span class="keyword">IF</span> MYROWS.AVGSCORE&gt;MAXSCORE <span class="keyword">THEN</span></span><br><span class="line">    MAXSCORE:=MYROWS.AVGSCORE;</span><br><span class="line">    MAXSTUDNO:=MYROWS.STUDNO;</span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">  <span class="keyword">IF</span> MYROWS.AVGSCORE&lt;MINSCORE <span class="keyword">THEN</span></span><br><span class="line">    MINSCORE:=MYROWS.AVGSCORE;</span><br><span class="line">    MINSTUDNO:=MYROWS.STUDNO;</span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span>;</span><br><span class="line"><span class="keyword">FOR</span> MYROWS <span class="keyword">IN</span> MYCUR</span><br><span class="line"><span class="keyword">LOOP</span></span><br><span class="line">  <span class="keyword">IF</span> MYROWS.STUDNO=MAXSTUDNO <span class="keyword">THEN</span></span><br><span class="line">    DBMS_OUTPUT.PUT_LINE(<span class="string">'MAX:'</span>||MYROWS.STUDNO||<span class="string">','</span>||MYROWS.STUDNAME||<span class="string">','</span>||MYROWS.AVGSCORE);</span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">  <span class="keyword">IF</span> MYROWS.STUDNO=MINSTUDNO <span class="keyword">THEN</span></span><br><span class="line">    DBMS_OUTPUT.PUT_LINE(<span class="string">'MIN:'</span>||MYROWS.STUDNO||<span class="string">','</span>||MYROWS.STUDNAME||<span class="string">','</span>||MYROWS.AVGSCORE);</span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure></p>
<p>9． 统计各班同年出生的学生人数。<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select classid,extract(year <span class="keyword">from</span> studbirthday),count(*)</span><br><span class="line"><span class="keyword">from</span> studinfo</span><br><span class="line">group by classid,extract(year <span class="keyword">from</span> studbirthday)</span><br></pre></td></tr></table></figure></p>
<p>10．统计各班同年同姓的学生人数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> classid,<span class="keyword">substr</span>(studname,<span class="number">-1</span>) 姓,<span class="keyword">extract</span>(<span class="keyword">year</span> <span class="keyword">from</span> studbirthday) 出生年,<span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> studinfo</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> classid,<span class="keyword">extract</span>(<span class="keyword">year</span> <span class="keyword">from</span> studbirthday),<span class="keyword">substr</span>(studname,<span class="number">-1</span>)</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(*)&gt;<span class="number">1</span></span><br></pre></td></tr></table></figure>    
<h4 id="投喂我"><a href="#投喂我" class="headerlink" title="投喂我"></a>投喂我</h4><p>写文不易，如果本文对你有帮助，点击Donate,微信和支付宝投喂我</p>
</div><iframe src="/donate/?AliPayQR=/img/AliPayQR.jpg&amp;WeChatQR=/img/WeChatQR.png&amp;GitHub=null&amp;BTCQR=null&amp;BTCKEY=null&amp;PayPal=null" style="overflow-x:hidden; overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;" frameborder="0" scrolling="no"></iframe><div class="tags"></div><div class="post-nav"><a class="next" href="/2018/04/30/ORACLE之存储过程和函数/">ORACLE之存储过程和函数</a></div><div id="lv-container" data-id="city" data-uid="MTAyMC8zNTcwNS8xMjI0MQ=="><script>(function(d, s) {
   var j, e = d.getElementsByTagName(s)[0];
   if (typeof LivereTower === 'function') { return; }
   j = d.createElement(s);
   j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
   j.async = true;
   e.parentNode.insertBefore(j, e);
})(document, 'script');
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://yoursite.com"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/05/01/ORACLE之触发器和游标/">ORACLE之触发器和游标</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/30/ORACLE之存储过程和函数/">ORACLE之存储过程和函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/27/ORACLE之ProcedureLanguage/">ORACLE之ProcedureLanguage</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/22/Python验证码与Ubuntu16-04字体缺失问题解决/">Python验证码与Ubuntu16.04字体缺失问题解决</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/18/SQL简单查询语句/">SQL简单查询语句</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/16/SQL建表-SQLLDR导入数据-DML语句/">SQL建表,SQLLDR导入数据,DML语句</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/13/hexo+github搭建个人博客/">hexo + github 搭建个人博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/13/Markdown常用语法/">Markdown常用语法</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Yhchdev.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async="async"></script><span id="busuanzi_container_site_pv">|访问量<span id="busuanzi_value_site_pv"></span></span><span id="busuanzi_container_site_uv">|访客数<span id="busuanzi_value_site_uv"> </span></span></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>